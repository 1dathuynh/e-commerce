extends ../../layout/default.pug
include ../../mixins/filter-status.pug
include ../../mixins/search.pug
include ../../mixins/pagination.pug

block main 
	h1 Danh sách sản phẩm

	.card-mb-3
		.card-header Bộ lọc và tìm kiếm
		.card-body
			.row
				.col-6
					+filter-status(filterStatus)
					//- Tìm kiếm sản phẩm
				.col-6
					+search(keyword)
			
		
	//- Danh sách sản phẩm
	.card-mb-3
		.card-header Danh sách sản phẩm
		.card-body
			form(action=`${path_url}/products/change-multi?_method=PATCH`, method="POST",form-change-multi)
				.d-flex.align-items-start
					.mb-3
						select(class="form-select" name="type")
							option(disabled selected) ---Chọn hành động--- 
							option(value="active") Hoạt động
							option(value="inactive") Dừng hoạt động
							option(value="delete-all") Xóa tất cả
					.mb-3
						input(class="form-control d-none" type="text" name="ids" value="")
					button(type="submit" class="btn btn-primary") Áp dụng
				


			table(class="table table-hover table-sm" check-box-multi)
				thead
					tr
						th 
							input(type="checkbox" name="checkall")
						th STT 
						th Hình ảnh
						th Tiêu đề
						th Giá
						th Trạng thái
						th Thao tác
				tbody
					each item, index in products
						tr
							td
								input(type="checkbox" name="id" value=item.id)
							td #{index + 1}
									td 
										img(src=item.thumbnail, alt=item.title, width="100px", height="auto")
									td #{item.title}
									td #{item.price}$
									td
										if(item.status == "active") 
											button(class="badge bg-success" data-status=item.status data-id= item.id button-change-status) Hoạt động
										else
											button(class="badge bg-danger" data-status=item.status data-id= item.id button-change-status) Ngừng Hoạt động
									td 
										button(class="btn btn-warning btn-sm") Sửa
										button(class="btn btn-danger btn-sm" data-id=item.id button-delete) Xóa
	.card-mb-3
		+pagination(pagination)

	form(action="" method="POST", id="form-change-status", data-path=`${path_url}/products/change-status`)
	form(action="" method="POST", id="form-delete", data-path=`${path_url}/products/delete`)

		script(src="/admin/js/products.js") 	

